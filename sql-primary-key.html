<!DOCTYPE html>
<html>
<head>

    <!-- Document Settings -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <!-- Base Meta -->
    <!-- dynamically fixing the title for tag/author pages -->



    <title>[SQL] 什麼要 primary key？primary key 一定要叫 id 嗎？</title>
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Styles'n'Scripts -->
    <link rel="stylesheet" type="text/css" href="/blog/assets/built/screen.css" />
    <link rel="stylesheet" type="text/css" href="/blog/assets/built/screen.edited.css" />
    <link rel="stylesheet" type="text/css" href="/blog/assets/built/syntax.css" />
    <!-- highlight.js -->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css">
    <style>.hljs { background: none; }</style>

    <!--[if IE]>
        <style>
            p, ol, ul{
                width: 100%;
            }
            blockquote{
                width: 100%;
            }
        </style>
    <![endif]-->

    <!-- This tag outputs SEO meta+structured data and other important settings -->
    <meta name="description" content="keep calm and eat eight Plates." />
    <link rel="shortcut icon" href="/blog/assets/images/favicon.png" type="image/png" />
    <link rel="canonical" href="/blog/sql-primary-key" />
    <meta name="referrer" content="no-referrer-when-downgrade" />

     <!--title below is coming from _includes/dynamic_title-->
    <meta property="og:site_name" content="Fumitsuki's magic box" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="[SQL] 什麼要 primary key？primary key 一定要叫 id 嗎？" />
    <meta property="og:description" content="問題一：可不可以不要 primary key？ 沒有 primary key 會怎樣？ primary key 主要的作用為： 1. 避免產生一堆重複又無法識別的 row 例如底下的表格，上一筆跟下一筆長一模一樣，根本無法識別。 name price quantity banana 100 1 banana 100 1 2. 有辦法撈到特定的 row 如下，每個 row 都長一樣，根本無法撈到特定某個 row。 name price quantity banana 100 1 banana 100 1 但是改成這樣： id name price quantity 1 banana 100 1 2 banana" />
    <meta property="og:url" content="/blog/sql-primary-key" />
    <meta property="og:image" content="/blog/assets/images/sql.jpg" />
    <meta property="article:publisher" content="https://www.facebook.com/" />
    <meta property="article:author" content="https://www.facebook.com/" />
    <meta property="article:published_time" content="2020-04-27T14:13:00+08:00" />
    <meta property="article:modified_time" content="2020-04-27T14:13:00+08:00" />
    <meta property="article:tag" content="Sql" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="[SQL] 什麼要 primary key？primary key 一定要叫 id 嗎？" />
    <meta name="twitter:description" content="問題一：可不可以不要 primary key？ 沒有 primary key 會怎樣？ primary key 主要的作用為： 1. 避免產生一堆重複又無法識別的 row 例如底下的表格，上一筆跟下一筆長一模一樣，根本無法識別。 name price quantity banana 100 1 banana 100 1 2. 有辦法撈到特定的 row 如下，每個 row 都長一樣，根本無法撈到特定某個 row。 name price quantity banana 100 1 banana 100 1 但是改成這樣： id name price quantity 1 banana 100 1 2 banana" />
    <meta name="twitter:url" content="/blog/" />
    <meta name="twitter:image" content="/blog/assets/images/sql.jpg" />
    <meta name="twitter:label1" content="Written by" />
    <meta name="twitter:data1" content="Fumitsuki's magic box" />
    <meta name="twitter:label2" content="Filed under" />
    <meta name="twitter:data2" content="Sql" />
    <meta name="twitter:site" content="@Fumitsuki0802" />
    <meta name="twitter:creator" content="@Fumitsuki0802" />
    <meta property="og:image:width" content="1400" />
    <meta property="og:image:height" content="933" />

    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Website",
    "publisher": {
        "@type": "Organization",
        "name": "Fumitsuki's magic box",
        "logo": "/blog/assets/images/blog-icon.png"
    },
    "url": "/blog/sql-primary-key",
    "image": {
        "@type": "ImageObject",
        "url": "/blog/assets/images/sql.jpg",
        "width": 2000,
        "height": 666
    },
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "/blog/sql-primary-key"
    },
    "description": "問題一：可不可以不要 primary key？ 沒有 primary key 會怎樣？ primary key 主要的作用為： 1. 避免產生一堆重複又無法識別的 row 例如底下的表格，上一筆跟下一筆長一模一樣，根本無法識別。 name price quantity banana 100 1 banana 100 1 2. 有辦法撈到特定的 row 如下，每個 row 都長一樣，根本無法撈到特定某個 row。 name price quantity banana 100 1 banana 100 1 但是改成這樣： id name price quantity 1 banana 100 1 2 banana"
}
    </script>

    <!-- <script type="text/javascript" src="https://demo.ghost.io/public/ghost-sdk.min.js?v=724281a32e"></script>
    <script type="text/javascript">
    ghost.init({
    	clientId: "ghost-frontend",
    	clientSecret: "f84a07a72b17"
    });
    </script> -->

    <meta name="generator" content="Jekyll 3.6.2" />
    <link rel="alternate" type="application/rss+xml" title="[SQL] 什麼要 primary key？primary key 一定要叫 id 嗎？" href="/blog/feed.xml" />


</head>
<body class="post-template">

    <div class="site-wrapper">
        <!-- All the main content gets inserted here, index.hbs, post.hbs, etc -->
        <!-- default -->

<!-- The tag above means: insert everything in this file
into the {body} of the default.hbs template -->

<header class="site-header outer">
    <div class="inner">
        <nav class="site-nav">
    <div class="site-nav-left">
        
            
                <a class="site-nav-logo" href="/blog/"><img src="/blog/assets/images/blog-icon.png" alt="Fumitsuki's magic box" /></a>
            
        
        
    </div>
    <div class="site-nav-right">
        <div class="social-links">
            
            
                <a class="social-link social-link-tw" href="https://twitter.com/Fumitsuki0802" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"/></svg>
</a>
            
        </div>
        
    </div>
</nav>

    </div>
</header>

<!-- Everything inside the #post tags pulls data from the post -->
<!-- #post -->

<main id="site-main" class="site-main outer" role="main">
    <div class="inner">

        <article class="post-full  tag-sql post tag-speeches ">

            <header class="post-full-header">
                <section class="post-full-meta">
                    <time class="post-full-meta-date" datetime="27 April 2020">27 April 2020</time>
                    
                        <span class="date-divider">/</span>
                        
                            
                               <a href='/blog/tag/sql/'>SQL</a>
                            
                        
                    
                </section>
                <h1 class="post-full-title">[SQL] 什麼要 primary key？primary key 一定要叫 id 嗎？</h1>
            </header>

            
            <figure class="post-full-image" style="background-image: url(/blog/assets/images/sql.jpg)">
            </figure>
            

            <section class="post-full-content">
                <div class="kg-card-markdown">
                    <h2 id="問題一可不可以不要-primary-key-沒有-primary-key-會怎樣">問題一：可不可以不要 primary key？ 沒有 primary key 會怎樣？</h2>
<p>primary key 主要的作用為：</p>

<h3 id="1-避免產生一堆重複又無法識別的-row">1. 避免產生一堆重複又無法識別的 row</h3>

<p>例如底下的表格，上一筆跟下一筆長一模一樣，根本無法識別。</p>

<table>
  <thead>
    <tr>
      <th>name</th>
      <th>price</th>
      <th>quantity</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>banana</td>
      <td>100</td>
      <td>1</td>
    </tr>
    <tr>
      <td>banana</td>
      <td>100</td>
      <td>1</td>
    </tr>
  </tbody>
</table>

<h3 id="2-有辦法撈到特定的-row">2. 有辦法撈到特定的 row</h3>

<p>如下，每個 row 都長一樣，根本無法撈到特定某個 row。</p>

<table>
  <thead>
    <tr>
      <th>name</th>
      <th>price</th>
      <th>quantity</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>banana</td>
      <td>100</td>
      <td>1</td>
    </tr>
    <tr>
      <td>banana</td>
      <td>100</td>
      <td>1</td>
    </tr>
  </tbody>
</table>

<p>但是改成這樣：</p>

<table>
  <thead>
    <tr>
      <th>id</th>
      <th>name</th>
      <th>price</th>
      <th>quantity</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1</td>
      <td>banana</td>
      <td>100</td>
      <td>1</td>
    </tr>
    <tr>
      <td>2</td>
      <td>banana</td>
      <td>100</td>
      <td>1</td>
    </tr>
  </tbody>
</table>

<p>就可以用 <code class="language-plaintext highlighter-rouge">WHERE id = 1</code> 來撈到第一筆資料</p>

<h3 id="3-foreign-key-reference">3. foreign key reference</h3>

<p>比方說這張表是 <code class="language-plaintext highlighter-rouge">orders</code></p>

<table>
  <thead>
    <tr>
      <th>customer</th>
      <th>date</th>
      <th>total</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Carol</td>
      <td>2020-01-01</td>
      <td>2000</td>
    </tr>
    <tr>
      <td>Carl</td>
      <td>2020-01-01</td>
      <td>500</td>
    </tr>
    <tr>
      <td>Carol</td>
      <td>2020-01-06</td>
      <td>2500</td>
    </tr>
  </tbody>
</table>

<p>有另一張表是 <code class="language-plaintext highlighter-rouge">order_items</code></p>

<table>
  <thead>
    <tr>
      <th>name</th>
      <th>price</th>
      <th>quantity</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>banana</td>
      <td>100</td>
      <td>1</td>
    </tr>
    <tr>
      <td>banana</td>
      <td>100</td>
      <td>1</td>
    </tr>
  </tbody>
</table>

<p>如果 <code class="language-plaintext highlighter-rouge">orders</code> 上沒有 primary key，無法透過在 <code class="language-plaintext highlighter-rouge">order_items</code> 加上 foreign key 來 reference order。</p>

<p>如果 <code class="language-plaintext highlighter-rouge">orders</code> 改成這樣：</p>

<table>
  <thead>
    <tr>
      <th>id</th>
      <th>customer</th>
      <th>date</th>
      <th>total</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1</td>
      <td>Carol</td>
      <td>2020-01-01</td>
      <td>2000</td>
    </tr>
    <tr>
      <td>2</td>
      <td>Carl</td>
      <td>2020-01-01</td>
      <td>500</td>
    </tr>
    <tr>
      <td>3</td>
      <td>Carol</td>
      <td>2020-01-06</td>
      <td>2500</td>
    </tr>
  </tbody>
</table>

<p>就可以簡單透過在 <code class="language-plaintext highlighter-rouge">order_items</code> 上加 <code class="language-plaintext highlighter-rouge">order_id</code>，加上 foreign key 來做 reference</p>

<table>
  <thead>
    <tr>
      <th>name</th>
      <th>price</th>
      <th>quantity</th>
      <th>order_id</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>banana</td>
      <td>100</td>
      <td>1</td>
      <td>1</td>
    </tr>
    <tr>
      <td>banana</td>
      <td>100</td>
      <td>1</td>
      <td>2</td>
    </tr>
  </tbody>
</table>

<p>沒有 primary key 的資料，就像是沒有書名的書，沒有歌名的音樂（欸）<strong>很容易造成整理上的困難。</strong></p>

<h2 id="問題二如何選擇-primary-key">問題二：如何選擇 primary key？</h2>

<p>primary key 有個必帶條件：一定要是<strong>唯一（unique）</strong>的，不可以重複。</p>

<p>所以你通常會找個 unique 的欄位來當 primary key。然而很多大家以為 unique 的東西都沒有 unique，例如身分證字號。（身分證字號在古早年代是有可能不小心重複發的XD）</p>

<p>或者是你看完 spec 以後以為應該要 unique，結果哪一天老闆跑來跟你說：「這個欄位的內容可以重複嗎？」的資料。（這個時候都會 OS：要不是我還不能離職，要不然真想打扁你XD）</p>

<p>像是使用者的 email、電話等等。</p>

<p>如果 primary key 這麼難選擇，選錯就會造成自己日後還得要連夜加班，有的時候不如就用 pseudokey 就好了。那具體來說 pseudokey 是什麼呢？</p>

<h3 id="pseudokey-surrogate-key">Pseudokey (Surrogate key)</h3>
<p>基本上是一些刻意塞給每個 row 的資料，key 本身對資料來說沒有任何意義。</p>

<p>我們看回剛剛的 <code class="language-plaintext highlighter-rouge">order_items</code>：</p>

<table>
  <thead>
    <tr>
      <th>id</th>
      <th>name</th>
      <th>price</th>
      <th>quantity</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1</td>
      <td>banana</td>
      <td>100</td>
      <td>1</td>
    </tr>
    <tr>
      <td>2</td>
      <td>banana</td>
      <td>100</td>
      <td>1</td>
    </tr>
  </tbody>
</table>

<p>上面的 <code class="language-plaintext highlighter-rouge">id</code> 對我來說沒有什麼意義可言， <code class="language-plaintext highlighter-rouge">id</code> 為 2 什麼的對我來說一點意義都沒有。但是有了這個 key 以後我就不用去思考，要用哪些欄位來組合成 primary key 了。</p>

<p>各家 DB 提供 AUTO_INCREMENT、GENERATOR 等功能來讓 pseudokey 自動增加，且多個 client 同時來 DB 塞資料也不會重複</p>

<p>的確很常見到教材裡面，每張表都有用來放一個 id 的 primary key 欄位，會 auto increment，甚至有些 web framework 就直接這樣設計。這個慣例很不錯，但這並不是絕對的。如果有本來就有可以拿來當 primary key 的欄位，直接拿來用也無妨。</p>

<table>
  <thead>
    <tr>
      <th>order_id</th>
      <th>customer</th>
      <th>date</th>
      <th>total</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1</td>
      <td>Carol</td>
      <td>2020-01-01</td>
      <td>2000</td>
    </tr>
    <tr>
      <td>2</td>
      <td>Carl</td>
      <td>2020-01-01</td>
      <td>500</td>
    </tr>
    <tr>
      <td>3</td>
      <td>Carol</td>
      <td>2020-01-06</td>
      <td>2500</td>
    </tr>
  </tbody>
</table>

<p>很多 web framework 的設計讓或書籍裡，都會讓每張表的 primary key 叫 id，然而這不是絕對的！比方說把 <code class="language-plaintext highlighter-rouge">products</code> 這張 table 的 primary key 叫 product_id，<code class="language-plaintext highlighter-rouge">users</code> 的叫 user_id 也挺好的。而且這種命名法還有一種優點，可以透過 <strong>USING</strong> 來 JOIN 資料表。</p>

<p>當 bugs 的 primary key 叫 bug_id，product 上對應的 foreign key 也叫 bug_id。 除了一般的 <code class="language-plaintext highlighter-rouge">JOIN ... ON ...</code>：</p>
<pre><code class="language-SQL">SELECT * FROM bugs
JOIN bug_products ON bugs.bug_id = bug_products.bug_id
</code></pre>

<p>還可以改寫成：</p>

<pre><code class="language-SQL">SELECT * FROM bugs
JOIN bug_products USING(bug_id)
</code></pre>

<h2 id="問題三只有-primary-key-無法避免資料重複">問題三：只有 primary key 無法避免資料重複</h2>

<p>如果 code 沒寫好，還是有可能出現很多重複資料。比方說這個是管理訂單跟負責員工的關聯表 <code class="language-plaintext highlighter-rouge">assignments</code>：</p>

<table>
  <thead>
    <tr>
      <th>id</th>
      <th>order_id</th>
      <th>employee_id</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1</td>
      <td>2</td>
      <td>330</td>
    </tr>
    <tr>
      <td>2</td>
      <td>2</td>
      <td>330</td>
    </tr>
    <tr>
      <td>3</td>
      <td>3</td>
      <td>331</td>
    </tr>
  </tbody>
</table>

<p>除了去檢查為什麼你的 code 沒有好好地 validate 資料、避免重複，也可以檢討一下 DB 這邊沒有把 <strong>unique key</strong> 加上去的部分。</p>

<p>在新增 table 的時候，可以針對 order_id 和 employee_id 加上 unique key，避免出現組合重複的 order_id、employee_id：</p>

<pre><code class="language-SQL">CREATE TABLE assignments(
   ...,
   UNIQUE(order_id,employee_id)
);
</code></pre>

<p>除此之外，直接拿 order_id 和 employee_id 組合成 compound key 來當 primary key 也是很 OK 的作法。</p>

<h2 id="問題四maxid-vs-last_insert_id-">問題四：<code class="language-plaintext highlighter-rouge">MAX(id)</code> vs <code class="language-plaintext highlighter-rouge">LAST_INSERT_ID() </code></h2>

<p>有些人會自己找 <code class="language-plaintext highlighter-rouge">MAX(id)</code> (資料庫裡最大的id) 去 generate 新 id。
這樣會有 Race Condition 的問題，當多個 client 同時操作資料庫，有可能不同 client 試圖塞一樣的 id 進來。為了避免 race condition 只好做 table lock，避免同時 insert，但這樣會導致效能瓶頸。</p>

<p>如果是用 AUTO_INCREAMENT ，MYSQL 可以用 LAST_INSERT_ID() 來取最後被 insert 進來的資料 id：</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>SELECT LAST_INSERT_ID() FROM products LIMIT 1;
</code></pre></div></div>

<h2 id="結論">結論</h2>

<ul>
  <li>primary key 是一種 constraint，不是一種 data type</li>
  <li>primary key 可以是 varchar, integer 等等等，沒有一定要是 integer</li>
  <li>primary key 可以是 auto_increment 的 pseudokey，也可以自己定義（反正 unique 就好）</li>
</ul>

<p>像 Rails 的理念是慣例優於設定（convention over configuration），這樣的理念使得大家可以降低開發成本，善用框架本身的設計帶來的便捷功能等等。一般來說就算不需要 Rails mibgration 幫你產生的 id，你也不會特別去拿掉他。</p>

<p>但是這可能會讓新手誤以為 primary key 就是一個叫 id、值為 integer 的欄位，其實不是這樣的。</p>

<p>最後，附上作者的提醒：</p>

<blockquote>
  <p>Don’t let inflexible conventions get in the way of good design</p>
</blockquote>

<h2 id="補充isoiec-11179">補充：ISO/IEC 11179</h2>
<p>針對 metadata 制訂的標準，和其他標準一樣不好閱讀。Joe Celko 在他的書 SQL propgramming style 裡有實際使用這個規範。</p>

<hr />

<p>本文是參考 Bill Karwin 的 SQL Antipatterns 第四章 ID required 彙整而成。原書說明了很多不太好的設計模式，什麼時候可以使用以及為何要避免使用等等。大家有空可以去翻閱看看哦。</p>

                </div>
            </section>

            <!-- Email subscribe form at the bottom of the page -->
            

            <footer class="post-full-footer">
                <!-- Everything inside the #author tags pulls data from the author -->
                <!-- #author-->
                
                    
                        <section class="author-card">
                            
                                <img class="author-profile-image" src="/blog/assets/images/fumitsuki.jpg" alt="fumitsuki" />
                            
                            <section class="author-card-content">
                                <h4 class="author-card-name"><a href="/blog/author/fumitsuki">文月</a></h4>
                                
                                    <p>擅長耍雷的フレンズ，在茫茫海海探索人生中</p>
                                
                            </section>
                        </section>
                        <div class="post-full-footer-right">
                            <a class="author-card-button" href="/blog/author/fumitsuki">Read More</a>
                        </div>
                    
                
                <!-- /author  -->
            </footer>

            <!-- If you use Disqus comments, just uncomment this block.
            The only thing you need to change is "test-apkdzgmqhj" - which
            should be replaced with your own Disqus site-id. -->
            

        </article>

    </div>
</main>

<!-- Links to Previous/Next posts -->
<aside class="read-next outer">
    <div class="inner">
        <div class="read-next-feed">
            
                
                
                
                
                    <article class="read-next-card"
                        
                            style="background-image: url(/blog/assets/images/blog-cover.jpg)"
                        
                    >
                        <header class="read-next-card-header">
                            <small class="read-next-card-header-sitetitle">&mdash; Fumitsuki's magic box &mdash;</small>
                            
                                <h3 class="read-next-card-header-title"><a href="/blog/tag/sql/">Sql</a></h3>
                            
                        </header>
                        <div class="read-next-divider"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 14.5s2 3 5 3 5.5-2.463 5.5-5.5S21 6.5 18 6.5c-5 0-7 11-12 11C2.962 17.5.5 15.037.5 12S3 6.5 6 6.5s4.5 3.5 4.5 3.5"/></svg>
</div>
                        <div class="read-next-card-content">
                            <ul>
                                
                                
                                  
                                
                                  
                                    
                                        
                                        
                                            <li><a href="/blog/single-source-of-truth-and-event-sourcing">工作雜談：多餘的 DB 欄位跟關聯</a></li>
                                        
                                    
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                            <li><a href="/blog/sql-no-comma-seperated-list">[SQL] 為什麼要多一張表處理多對多關係？把數值都逗號分隔存起來不行嗎？</a></li>
                                        
                                    
                                  
                                
                                  
                                    
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                            </ul>
                        </div>
                        <footer class="read-next-card-footer">
                            <a href="/blog/tag/sql/">
                                
                                    See all 2 posts  →
                                
                            </a>
                        </footer>
                    </article>
                
            

            <!-- If there's a next post, display it using the same markup included from - partials/post-card.hbs -->
            
                

    <article class="post-card post-template">
        
            <a class="post-card-image-link" href="/blog/sql-no-comma-seperated-list">
                <div class="post-card-image" style="background-image: url(/blog/assets/images/sql.jpg)"></div>
            </a>
        
        <div class="post-card-content">
            <a class="post-card-content-link" href="/blog/sql-no-comma-seperated-list">
                <header class="post-card-header">
                    
                        
                            
                                <span class="post-card-tags">Sql</span>
                            
                        
                    

                    <h2 class="post-card-title">[SQL] 為什麼要多一張表處理多對多關係？把數值都逗號分隔存起來不行嗎？</h2>
                </header>
            </a>
            <footer class="post-card-meta">
                
                    
                        
                        <img class="author-profile-image" src="/blog/assets/images/fumitsuki.jpg" alt="文月" />
                        
                        <span class="post-card-author">
                            <a href="/blog/author/fumitsuki/">文月</a>
                        </span>
                    
                
                <span class="reading-time">
                    
                    
                      2 min read
                    
                </span>
            </footer>
        </div>
    </article>

            

            <!-- If there's a previous post, display it using the same markup included from - partials/post-card.hbs -->
            
                

    <article class="post-card post-template">
        
            <a class="post-card-image-link" href="/blog/tailwind-css-plugin">
                <div class="post-card-image" style="background-image: url(/blog/assets/images/tailwind-example-cover.jpg)"></div>
            </a>
        
        <div class="post-card-content">
            <a class="post-card-content-link" href="/blog/tailwind-css-plugin">
                <header class="post-card-header">
                    
                        
                            
                                <span class="post-card-tags">Css</span>
                            
                        
                    

                    <h2 class="post-card-title">還在跟複雜的 CSS 的設定奮鬥嗎？用 Tailwind 來幫你實現真正的高效整潔！</h2>
                </header>
            </a>
            <footer class="post-card-meta">
                
                    
                        
                        <img class="author-profile-image" src="/blog/assets/images/fumitsuki.jpg" alt="文月" />
                        
                        <span class="post-card-author">
                            <a href="/blog/author/fumitsuki/">文月</a>
                        </span>
                    
                
                <span class="reading-time">
                    
                    
                      7 min read
                    
                </span>
            </footer>
        </div>
    </article>

            

        </div>
    </div>
</aside>

<!-- Floating header which appears on-scroll, included from includes/floating-header.hbs -->
<div class="floating-header">
    <div class="floating-header-logo">
        <a href="/blog/">
            
                <img src="/blog/assets/images/favicon.png" alt="Fumitsuki's magic box icon" />
            
            <span>Fumitsuki's magic box</span>
        </a>
    </div>
    <span class="floating-header-divider">&mdash;</span>
    <div class="floating-header-title">[SQL] 什麼要 primary key？primary key 一定要叫 id 嗎？</div>
    <div class="floating-header-share">
        <div class="floating-header-share-label">Share this <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
    <path d="M7.5 15.5V4a1.5 1.5 0 1 1 3 0v4.5h2a1 1 0 0 1 1 1h2a1 1 0 0 1 1 1H18a1.5 1.5 0 0 1 1.5 1.5v3.099c0 .929-.13 1.854-.385 2.748L17.5 23.5h-9c-1.5-2-5.417-8.673-5.417-8.673a1.2 1.2 0 0 1 1.76-1.605L7.5 15.5zm6-6v2m-3-3.5v3.5m6-1v2"/>
</svg>
</div>
        <a class="floating-header-share-tw" href="https://twitter.com/share?text=%5BSQL%5D+%E4%BB%80%E9%BA%BC%E8%A6%81+primary+key%EF%BC%9Fprimary+key+%E4%B8%80%E5%AE%9A%E8%A6%81%E5%8F%AB+id+%E5%97%8E%EF%BC%9F&amp;url=https://requiemformemories.github.io/blog/sql-primary-key"
            onclick="window.open(this.href, 'share-twitter', 'width=550,height=235');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"/></svg>

        </a>
        <a class="floating-header-share-fb" href="https://www.facebook.com/sharer/sharer.php?u=https://requiemformemories.github.io/blog/sql-primary-key"
            onclick="window.open(this.href, 'share-facebook','width=580,height=296');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M19 6h5V0h-5c-3.86 0-7 3.14-7 7v3H8v6h4v16h6V16h5l1-6h-6V7c0-.542.458-1 1-1z"/></svg>

        </a>
    </div>
    <progress class="progress" value="0">
        <div class="progress-container">
            <span class="progress-bar"></span>
        </div>
    </progress>
</div>


<!-- /post -->

<!-- The #contentFor helper here will send everything inside it up to the matching #block helper found in default.hbs -->


        <!-- Previous/next page links - displayed on every page -->
        

        <!-- The footer at the very bottom of the screen -->
        <footer class="site-footer outer">
            <div class="site-footer-content inner">
                <section class="copyright"><a href="/blog/">Fumitsuki's magic box</a> &copy; 2022</section>
                <section class="poweredby">Proudly published with <a href="https://jekyllrb.com/">Jekyll</a> &
                    <a href="https://pages.github.com/" target="_blank" rel="noopener">GitHub Pages</a> using
                    <a href="https://github.com/jekyllt/jasper2" target="_blank" rel="noopener">Jasper2</a></section>
                <nav class="site-footer-nav">
                    <a href="/blog/">Latest Posts</a>
                    
                    <a href="https://twitter.com/Fumitsuki0802" target="_blank" rel="noopener">Twitter</a>
                </nav>
            </div>
        </footer>

    </div>

    <!-- The big email subscribe modal content -->
    

    <!-- highlight.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.10.0/components/prism-abap.min.js"></script>
    <script>$(document).ready(function() {
      $('pre code').each(function(i, block) {
        hljs.highlightBlock(block);
      });
    });</script>

    <!-- jQuery + Fitvids, which makes all video embeds responsive -->
    <script
        src="https://code.jquery.com/jquery-3.2.1.min.js"
        integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
        crossorigin="anonymous">
    </script>
    <script type="text/javascript" src="/blog/assets/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="https://demo.ghost.io/assets/js/jquery.fitvids.js?v=724281a32e"></script>


    <!-- Paginator increased to "infinit" in _config.yml -->
    <!-- if paginator.posts  -->
    <!-- <script>
        var maxPages = parseInt('');
    </script>
    <script src="/blog/assets/js/infinitescroll.js"></script> -->
    <!-- /endif -->

    


    <!-- Add Google Analytics  -->
    <!-- Google Analytics Tracking code -->
 <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-69281367-1', 'auto');
  ga('send', 'pageview');

 </script>


    <!-- The #block helper will pull in data from the #contentFor other template files. In this case, there's some JavaScript which we only want to use in post.hbs, but it needs to be included down here, after jQuery has already loaded. -->
    
        <script>

// NOTE: Scroll performance is poor in Safari
// - this appears to be due to the events firing much more slowly in Safari.
//   Dropping the scroll event and using only a raf loop results in smoother
//   scrolling but continuous processing even when not scrolling
$(document).ready(function () {
    // Start fitVids
    var $postContent = $(".post-full-content");
    $postContent.fitVids();
    // End fitVids

    var progressBar = document.querySelector('progress');
    var header = document.querySelector('.floating-header');
    var title = document.querySelector('.post-full-title');

    var lastScrollY = window.scrollY;
    var lastWindowHeight = window.innerHeight;
    var lastDocumentHeight = $(document).height();
    var ticking = false;

    function onScroll() {
        lastScrollY = window.scrollY;
        requestTick();
    }

    function onResize() {
        lastWindowHeight = window.innerHeight;
        lastDocumentHeight = $(document).height();
        requestTick();
    }

    function requestTick() {
        if (!ticking) {
            requestAnimationFrame(update);
        }
        ticking = true;
    }

    function update() {
        var trigger = title.getBoundingClientRect().top + window.scrollY;
        var triggerOffset = title.offsetHeight + 35;
        var progressMax = lastDocumentHeight - lastWindowHeight;

        // show/hide floating header
        if (lastScrollY >= trigger + triggerOffset) {
            header.classList.add('floating-active');
        } else {
            header.classList.remove('floating-active');
        }

        progressBar.setAttribute('max', progressMax);
        progressBar.setAttribute('value', lastScrollY);

        ticking = false;
    }

    window.addEventListener('scroll', onScroll, {passive: true});
    window.addEventListener('resize', onResize, false);

    update();
});
</script>

    

    <!-- Ghost outputs important scripts and data with this tag - it should always be the very last thing before the closing body tag -->
    <!-- ghost_foot -->

</body>
</html>
