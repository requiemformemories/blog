<!DOCTYPE html>
<html>
<head>

    <!-- Document Settings -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <!-- Base Meta -->
    <!-- dynamically fixing the title for tag/author pages -->



    <title>三分鐘教你如何在 OpsWorks Stack 上面用 12.x 的 nodejs</title>
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Styles'n'Scripts -->
    <link rel="stylesheet" type="text/css" href="/blog/assets/built/screen.css" />
    <link rel="stylesheet" type="text/css" href="/blog/assets/built/screen.edited.css" />
    <link rel="stylesheet" type="text/css" href="/blog/assets/built/syntax.css" />
    <!-- highlight.js -->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css">
    <style>.hljs { background: none; }</style>

    <!--[if IE]>
        <style>
            p, ol, ul{
                width: 100%;
            }
            blockquote{
                width: 100%;
            }
        </style>
    <![endif]-->

    <!-- This tag outputs SEO meta+structured data and other important settings -->
    <meta name="description" content="keep calm and eat eight Plates." />
    <link rel="shortcut icon" href="/blog/assets/images/favicon.png" type="image/png" />
    <link rel="canonical" href="/blog/install-node-lts-on-opsworks-stack" />
    <meta name="referrer" content="no-referrer-when-downgrade" />

     <!--title below is coming from _includes/dynamic_title-->
    <meta property="og:site_name" content="Fumitsuki's magic box" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="三分鐘教你如何在 OpsWorks Stack 上面用 12.x 的 nodejs" />
    <meta property="og:description" content="最近做案子才第一次碰到 Opsworks Stack，然而剛碰到這個工具覺得非常害怕。首先當你在新增 stack 的時候，會發現只有 Chef 11 的 stack 和 Chef 12 的 stack。 Chef 都出到 16 了。AWS 是沒打算出新的意思嗎 😨 然後再來看看 Chef 11 的 build-in recipes 和 OS packages。 nodejs 的版本居然是 0.10.x，現在的 LTS 版本不是 12.x 嗎（抖抖抖 這個工具到底何時會被 AWS 淘汰啊，覺得驚恐。 nodejs 這麼舊，一定會有人反應對吧？沒錯！ 不過 AWS 官方的態度是希望大家都去用 community cookbooks，沒打算再更新現有的 cookbooks 了。 簡單第一句話打發了來開 issue、加一的眾人：" />
    <meta property="og:url" content="/blog/install-node-lts-on-opsworks-stack" />
    <meta property="og:image" content="/blog/assets/images/stack.jpg" />
    <meta property="article:publisher" content="https://www.facebook.com/" />
    <meta property="article:author" content="https://www.facebook.com/" />
    <meta property="article:published_time" content="2020-08-11T20:09:00+08:00" />
    <meta property="article:modified_time" content="2020-08-11T20:09:00+08:00" />
    <meta property="article:tag" content="Aws" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="三分鐘教你如何在 OpsWorks Stack 上面用 12.x 的 nodejs" />
    <meta name="twitter:description" content="最近做案子才第一次碰到 Opsworks Stack，然而剛碰到這個工具覺得非常害怕。首先當你在新增 stack 的時候，會發現只有 Chef 11 的 stack 和 Chef 12 的 stack。 Chef 都出到 16 了。AWS 是沒打算出新的意思嗎 😨 然後再來看看 Chef 11 的 build-in recipes 和 OS packages。 nodejs 的版本居然是 0.10.x，現在的 LTS 版本不是 12.x 嗎（抖抖抖 這個工具到底何時會被 AWS 淘汰啊，覺得驚恐。 nodejs 這麼舊，一定會有人反應對吧？沒錯！ 不過 AWS 官方的態度是希望大家都去用 community cookbooks，沒打算再更新現有的 cookbooks 了。 簡單第一句話打發了來開 issue、加一的眾人：" />
    <meta name="twitter:url" content="/blog/" />
    <meta name="twitter:image" content="/blog/assets/images/stack.jpg" />
    <meta name="twitter:label1" content="Written by" />
    <meta name="twitter:data1" content="Fumitsuki's magic box" />
    <meta name="twitter:label2" content="Filed under" />
    <meta name="twitter:data2" content="Aws" />
    <meta name="twitter:site" content="@Fumitsuki0802" />
    <meta name="twitter:creator" content="@Fumitsuki0802" />
    <meta property="og:image:width" content="1400" />
    <meta property="og:image:height" content="933" />

    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Website",
    "publisher": {
        "@type": "Organization",
        "name": "Fumitsuki's magic box",
        "logo": "/blog/assets/images/blog-icon.png"
    },
    "url": "/blog/install-node-lts-on-opsworks-stack",
    "image": {
        "@type": "ImageObject",
        "url": "/blog/assets/images/stack.jpg",
        "width": 2000,
        "height": 666
    },
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "/blog/install-node-lts-on-opsworks-stack"
    },
    "description": "最近做案子才第一次碰到 Opsworks Stack，然而剛碰到這個工具覺得非常害怕。首先當你在新增 stack 的時候，會發現只有 Chef 11 的 stack 和 Chef 12 的 stack。 Chef 都出到 16 了。AWS 是沒打算出新的意思嗎 😨 然後再來看看 Chef 11 的 build-in recipes 和 OS packages。 nodejs 的版本居然是 0.10.x，現在的 LTS 版本不是 12.x 嗎（抖抖抖 這個工具到底何時會被 AWS 淘汰啊，覺得驚恐。 nodejs 這麼舊，一定會有人反應對吧？沒錯！ 不過 AWS 官方的態度是希望大家都去用 community cookbooks，沒打算再更新現有的 cookbooks 了。 簡單第一句話打發了來開 issue、加一的眾人："
}
    </script>

    <!-- <script type="text/javascript" src="https://demo.ghost.io/public/ghost-sdk.min.js?v=724281a32e"></script>
    <script type="text/javascript">
    ghost.init({
    	clientId: "ghost-frontend",
    	clientSecret: "f84a07a72b17"
    });
    </script> -->

    <meta name="generator" content="Jekyll 3.6.2" />
    <link rel="alternate" type="application/rss+xml" title="三分鐘教你如何在 OpsWorks Stack 上面用 12.x 的 nodejs" href="/blog/feed.xml" />


</head>
<body class="post-template">

    <div class="site-wrapper">
        <!-- All the main content gets inserted here, index.hbs, post.hbs, etc -->
        <!-- default -->

<!-- The tag above means: insert everything in this file
into the {body} of the default.hbs template -->

<header class="site-header outer">
    <div class="inner">
        <nav class="site-nav">
    <div class="site-nav-left">
        
            
                <a class="site-nav-logo" href="/blog/"><img src="/blog/assets/images/blog-icon.png" alt="Fumitsuki's magic box" /></a>
            
        
        
    </div>
    <div class="site-nav-right">
        <div class="social-links">
            
            
                <a class="social-link social-link-tw" href="https://twitter.com/Fumitsuki0802" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"/></svg>
</a>
            
        </div>
        
    </div>
</nav>

    </div>
</header>

<!-- Everything inside the #post tags pulls data from the post -->
<!-- #post -->

<main id="site-main" class="site-main outer" role="main">
    <div class="inner">

        <article class="post-full  tag-aws post tag-speeches ">

            <header class="post-full-header">
                <section class="post-full-meta">
                    <time class="post-full-meta-date" datetime="11 August 2020">11 August 2020</time>
                    
                        <span class="date-divider">/</span>
                        
                            
                               <a href='/blog/tag/aws/'>AWS</a>
                            
                        
                    
                </section>
                <h1 class="post-full-title">三分鐘教你如何在 OpsWorks Stack 上面用 12.x 的 nodejs</h1>
            </header>

            
            <figure class="post-full-image" style="background-image: url(/blog/assets/images/stack.jpg)">
            </figure>
            

            <section class="post-full-content">
                <div class="kg-card-markdown">
                    <p>最近做案子才第一次碰到 Opsworks Stack，然而剛碰到這個工具覺得非常害怕。首先當你在新增 stack 的時候，會發現只有 Chef 11 的 stack 和 Chef 12 的 stack。</p>

<p><img src="https://i.imgur.com/wVA9b2O.jpg" alt="新增 stack" /></p>

<p>Chef 都出到 16 了。AWS 是沒打算出新的意思嗎 😨</p>

<p>然後再來看看 Chef 11 的 build-in recipes 和 OS packages。 nodejs 的版本居然是 0.10.x，現在的 LTS 版本不是 12.x 嗎（抖抖抖</p>

<p>這個工具到底何時會被 AWS 淘汰啊，覺得驚恐。</p>

<p>nodejs 這麼舊，一定會有人<a href="https://github.com/aws/opsworks-cookbooks/issues/377">反應</a>對吧？沒錯！</p>

<p>不過 AWS 官方的態度是希望大家都去用 community cookbooks，沒打算再更新現有的 cookbooks 了。 簡單第一句話打發了來開 issue、加一的眾人：</p>

<blockquote>
  <p>Yes, please use the Chef community cookbook for Nodejs on Chef 12 for OpsWorks.</p>
</blockquote>

<p>2020 年看到這句話的我覺得格外厭世，叫我上哪去找 community cookbooks 啦，Chef 11 跟 12 大家都差不多放棄支援了QQ</p>

<p>另外，Chef 12 Stack 再也沒有 build-in cookbooks 了，果然是官方不想在維護這個了嗎XD</p>

<p>所幸經過了黑暗的一個禮拜，終於成功把 nodejs override 成 12.x 了！真是謝天謝地！</p>

<p>接下來就跟大家說說該怎麼做。</p>

<h2 id="觀察一下官方的-cookbook-做了什麼">觀察一下官方的 cookbook 做了什麼</h2>

<p>當我把 nodejs 加到 OS package 裡以後，跑一下 setup，再看一下 instance log ，發現加上了 nodejs 套件以後，多了 opsworks_nodejs 這個 cookbook。</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>INFO: Storing updated cookbooks/opsworks_nodejs/recipes/create_env_file.rb in the cache.
</code></pre></div></div>

<p>要看看這個 cookbook 的內容可以不用直接上 <code class="language-plaintext highlighter-rouge">/opt/aws/opsworks/current/cookbooks/</code>，可以在 <a href="https://github.com/aws/opsworks-cookbooks/tree/release-chef-11.10/opsworks_nodejs">GitHub</a> 上把他下載下來。</p>

<p>打開 recipe 看看他是怎麼裝 node 的。會看到這個 <code class="language-plaintext highlighter-rouge">opsworks_commons_assets_installer</code></p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># opsworks_nodejs/recipes/default.rb:32-39</span>
<span class="n">opsworks_commons_assets_installer</span> <span class="s2">"Install user space OpsWorks NodeJS package"</span> <span class="k">do</span>
  <span class="n">asset</span> <span class="no">PACKAGE_BASENAME</span>
  <span class="n">version</span> <span class="n">node</span><span class="p">[</span><span class="ss">:opsworks_nodejs</span><span class="p">][</span><span class="ss">:version</span><span class="p">]</span>
  <span class="n">release</span> <span class="n">node</span><span class="p">[</span><span class="ss">:opsworks_nodejs</span><span class="p">][</span><span class="ss">:pkgrelease</span><span class="p">]</span>

  <span class="n">notifies</span> <span class="ss">:write</span><span class="p">,</span> <span class="s2">"log[downloading]"</span><span class="p">,</span> <span class="ss">:immediately</span>
  <span class="n">action</span> <span class="ss">:install</span>
<span class="k">end</span>
</code></pre></div></div>

<p>也就是他是在這裡吃到 <code class="language-plaintext highlighter-rouge">node[:opsworks_nodejs][:version]</code> ，然後會試著把這個版本裝起來。</p>

<p>那這個 installer 幫我們做了哪些事呢？我們可以在 <code class="language-plaintext highlighter-rouge">opsworks_commons/providers/assets_installer.rb</code> 看到他的實作。觀察一下可以看出來他會去一個 S3 bucket（預設是 <code class="language-plaintext highlighter-rouge">https://opsworks-instance-assets-us-east-1.s3.amazonaws.com</code>）把對應的套件包抓下來裝起來。根據 linux 發行版、發行版版本、處理器的不同決定在哪一個 path。</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="vi">@asset_url</span> <span class="o">||=</span> <span class="no">URI</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="s2">"</span><span class="si">#{</span><span class="n">node</span><span class="p">[</span><span class="ss">:opsworks_commons</span><span class="p">][</span><span class="ss">:assets_url</span><span class="p">]</span><span class="si">}</span><span class="s2">/packages/</span><span class="si">#{</span><span class="n">_platform</span><span class="si">}</span><span class="s2">/</span><span class="si">#{</span><span class="n">_platform_version</span><span class="si">}</span><span class="s2">/</span><span class="si">#{</span><span class="n">asset_name</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</code></pre></div></div>

<p>例如 Amazon Linux 2018.03 最後的 asset_url 可能會長這樣 <code class="language-plaintext highlighter-rouge">/packages/amazon/2018.03/opsworks-nodejs-12.18.3-1.x86_64.rpm</code>。Ubuntu 14.04 可能會像這樣 <code class="language-plaintext highlighter-rouge">/packages/ubuntu/14.04/opsworks-nodejs_12.18.3-1_amd64.deb</code>。</p>

<p>AWS 提供的 bucket 上沒有我們要的 12.x 版本，但是我們可以自己指定我們要的 node 版本，放到我們自己的 S3 上。這樣也不需要魔改太多東西XD</p>

<p>不過這邊要 <strong>特別注意</strong>，<strong>注意！注意！注意！</strong>，既然我們把 asset_url 改掉了，那之後 berkshelf 各種玩意兒都會試圖從我們新開的 S3 bucket 抓，所有會用到的套件等等都要記得放上來。</p>

<p>比方說我用 Rails 的 cookbook，就不能少了 ruby。如果開機器失敗了，可以檢查一下 log，應該會告訴你是少了哪一個 package 才會 setup 失敗。在 S3 補上對應的 package 即可。</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Failed to download asset opsworks-ruby2.5 for Install user space OpsWorks ruby package with url https://your-bucket-name.s3-your-region.amazonaws.com/packages/amazon/2018.03/opsworks-ruby25-2.5.1-1.x86_64.rpm.
</code></pre></div></div>

<h2 id="override-attributes--上傳-package-file--完成">Override Attributes + 上傳 package file = 完成！</h2>

<p>所以我們要做的事情是，想辦法蓋掉原本的 <code class="language-plaintext highlighter-rouge">opsworks_nodejs</code> 的 <code class="language-plaintext highlighter-rouge">version</code>，然後把對應的 package 傳上 S3。</p>

<p>至於怎麼覆蓋掉 version，可以看看 <code class="language-plaintext highlighter-rouge">opsworks_commons/attributes/customize.rb</code> 上面的說明</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">###</span>
<span class="c1"># This is the place to override the opsworks_commons cookbook's default attributes.</span>
<span class="c1">#</span>
<span class="c1"># Do not edit THIS file directly. Instead, create</span>
<span class="c1"># "opsworks_commons/attributes/customize.rb" in your cookbook repository and</span>
<span class="c1"># put the overrides in YOUR customize.rb file.</span>
<span class="c1">###</span>
</code></pre></div></div>

<p>他希望你另外開個 custom-cookbook，在裡面留下這個 customize.rb 來蓋掉 version 的值。所以我們可以先到 GitHub （或其他你喜歡的平台w）開個 repo 來放你的 custom-cookbook，然後在裡面複製貼上 <code class="language-plaintext highlighter-rouge">opsworks_commons/attributes/customize.rb</code>（那個註解要不要留著看你）。</p>

<p>在裡面加上你要的 node 版本：</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">normal</span><span class="p">[</span><span class="ss">:opsworks_nodejs</span><span class="p">][</span><span class="ss">:version</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'12.18.3'</span>
</code></pre></div></div>

<p>記得要去改 Stack setting，到<code class="language-plaintext highlighter-rouge">Use custom Chef cookbooks</code> 的區塊把這個 custom-cookbook 的 repo URL、branch name 加進去。</p>

<p>完成第一部分了，接著來做第二部分。到 S3 開個 bucket （名字看起來就是跟 OpsWorks 有關且不會誤刪即可w）。根據對應的 path 來放你的 assets。像上面提到的 <code class="language-plaintext highlighter-rouge">/packages/amazon/2018.03</code> 這樣。然後把 deb/rpm file 傳上來，名字改一改。像是我除了 node 還會用到 berkshelf 和 ruby，這些也要放上來。</p>

<p>然後在 custom json 加上新開的 bucket：</p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">"opsworks_commons"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"assets_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-bucket-name.s3-your-region.amazonaws.com"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>最後去開台新的機器（或是把舊的停掉重開），看看有沒有順利完成 setup。如果當初檔名或 path 有設定錯，應該都可以在 log 中找到錯誤訊息。</p>

<p>如果順利 setup 了，連上機器檢查一下 node 版本是不是對的。</p>

<p>包含機器開開關關的過程可能不止三分鐘XD 這樣是不是有點標題詐欺 🤭</p>

<h2 id="同場加映消失的-ruby-24-與-25">同場加映：消失的 Ruby 2.4 與 2.5</h2>
<p>如果你有設定過 Rails App Server，會發現只有 Ruby 2.1、2.2、2.3、2.6。</p>

<p>咦？2.4 跟 2.5 飛去哪了？如果我想用 2.5 要怎麼辦？</p>

<p>這件事情也是有人<a href="https://github.com/aws/opsworks-cookbooks/issues/421">抱怨</a>過，官方目前置之不理（？）</p>

<p>不過有善良的 user 上來告訴大家解方，其實<a href="https://github.com/aws/opsworks-cookbooks/issues/421#issuecomment-423540014">解法</a>跟上述 nodejs 的差不多，一樣是改掉 ruby 版本、asset url，然後自己把各種套件包傳上 S3 這樣。</p>

<h2 id="結論">結論</h2>

<p>實際上操作使用以後，覺得 OpsWorks Stack 的確是對 DevOps 人力不足的團隊來說相當友善，很多服務都被抽象成各種 layer，很好做設定。尤其時使用 build-in cookbook，真的是滑鼠點一點一個好好的環境就出來了。真的是可以理解為什麼業主到現在都還是使用… (ry</p>

<p>如果今年還是 2018 年之類的，我可能還是會覺得 OpsWorks Stacks 真是棒 owo</p>

<p>不過哪天沒有太多 issue 纏身，我還是想看看是否能改用其他工具www</p>

<p>最後也希望大家都有成功把 node 設定成想要的版本，一切順利 🌟</p>

                </div>
            </section>

            <!-- Email subscribe form at the bottom of the page -->
            

            <footer class="post-full-footer">
                <!-- Everything inside the #author tags pulls data from the author -->
                <!-- #author-->
                
                    
                        <section class="author-card">
                            
                                <img class="author-profile-image" src="/blog/assets/images/fumitsuki.jpg" alt="fumitsuki" />
                            
                            <section class="author-card-content">
                                <h4 class="author-card-name"><a href="/blog/author/fumitsuki">文月</a></h4>
                                
                                    <p>擅長耍雷的フレンズ，在茫茫海海探索人生中</p>
                                
                            </section>
                        </section>
                        <div class="post-full-footer-right">
                            <a class="author-card-button" href="/blog/author/fumitsuki">Read More</a>
                        </div>
                    
                
                <!-- /author  -->
            </footer>

            <!-- If you use Disqus comments, just uncomment this block.
            The only thing you need to change is "test-apkdzgmqhj" - which
            should be replaced with your own Disqus site-id. -->
            

        </article>

    </div>
</main>

<!-- Links to Previous/Next posts -->
<aside class="read-next outer">
    <div class="inner">
        <div class="read-next-feed">
            
                
                
                
                
            

            <!-- If there's a next post, display it using the same markup included from - partials/post-card.hbs -->
            
                

    <article class="post-card post-template">
        
            <a class="post-card-image-link" href="/blog/cs50-notes-scratch">
                <div class="post-card-image" style="background-image: url(/blog/assets/images/cs50.jpg)"></div>
            </a>
        
        <div class="post-card-content">
            <a class="post-card-content-link" href="/blog/cs50-notes-scratch">
                <header class="post-card-header">
                    
                        
                            
                                <span class="post-card-tags">Cs50</span>
                            
                        
                    

                    <h2 class="post-card-title">CS50 筆記：第零講 Scratch</h2>
                </header>
            </a>
            <footer class="post-card-meta">
                
                    
                        
                        <img class="author-profile-image" src="/blog/assets/images/fumitsuki.jpg" alt="文月" />
                        
                        <span class="post-card-author">
                            <a href="/blog/author/fumitsuki/">文月</a>
                        </span>
                    
                
                <span class="reading-time">
                    
                    
                      1 min read
                    
                </span>
            </footer>
        </div>
    </article>

            

            <!-- If there's a previous post, display it using the same markup included from - partials/post-card.hbs -->
            
                

    <article class="post-card post-template">
        
            <a class="post-card-image-link" href="/blog/sql-no-comma-seperated-list">
                <div class="post-card-image" style="background-image: url(/blog/assets/images/sql.jpg)"></div>
            </a>
        
        <div class="post-card-content">
            <a class="post-card-content-link" href="/blog/sql-no-comma-seperated-list">
                <header class="post-card-header">
                    
                        
                            
                                <span class="post-card-tags">Sql</span>
                            
                        
                    

                    <h2 class="post-card-title">[SQL] 為什麼要多一張表處理多對多關係？把數值都逗號分隔存起來不行嗎？</h2>
                </header>
            </a>
            <footer class="post-card-meta">
                
                    
                        
                        <img class="author-profile-image" src="/blog/assets/images/fumitsuki.jpg" alt="文月" />
                        
                        <span class="post-card-author">
                            <a href="/blog/author/fumitsuki/">文月</a>
                        </span>
                    
                
                <span class="reading-time">
                    
                    
                      2 min read
                    
                </span>
            </footer>
        </div>
    </article>

            

        </div>
    </div>
</aside>

<!-- Floating header which appears on-scroll, included from includes/floating-header.hbs -->
<div class="floating-header">
    <div class="floating-header-logo">
        <a href="/blog/">
            
                <img src="/blog/assets/images/favicon.png" alt="Fumitsuki's magic box icon" />
            
            <span>Fumitsuki's magic box</span>
        </a>
    </div>
    <span class="floating-header-divider">&mdash;</span>
    <div class="floating-header-title">三分鐘教你如何在 OpsWorks Stack 上面用 12.x 的 nodejs</div>
    <div class="floating-header-share">
        <div class="floating-header-share-label">Share this <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
    <path d="M7.5 15.5V4a1.5 1.5 0 1 1 3 0v4.5h2a1 1 0 0 1 1 1h2a1 1 0 0 1 1 1H18a1.5 1.5 0 0 1 1.5 1.5v3.099c0 .929-.13 1.854-.385 2.748L17.5 23.5h-9c-1.5-2-5.417-8.673-5.417-8.673a1.2 1.2 0 0 1 1.76-1.605L7.5 15.5zm6-6v2m-3-3.5v3.5m6-1v2"/>
</svg>
</div>
        <a class="floating-header-share-tw" href="https://twitter.com/share?text=%E4%B8%89%E5%88%86%E9%90%98%E6%95%99%E4%BD%A0%E5%A6%82%E4%BD%95%E5%9C%A8+OpsWorks+Stack+%E4%B8%8A%E9%9D%A2%E7%94%A8+12.x+%E7%9A%84+nodejs&amp;url=https://requiemformemories.github.io/blog/install-node-lts-on-opsworks-stack"
            onclick="window.open(this.href, 'share-twitter', 'width=550,height=235');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"/></svg>

        </a>
        <a class="floating-header-share-fb" href="https://www.facebook.com/sharer/sharer.php?u=https://requiemformemories.github.io/blog/install-node-lts-on-opsworks-stack"
            onclick="window.open(this.href, 'share-facebook','width=580,height=296');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M19 6h5V0h-5c-3.86 0-7 3.14-7 7v3H8v6h4v16h6V16h5l1-6h-6V7c0-.542.458-1 1-1z"/></svg>

        </a>
    </div>
    <progress class="progress" value="0">
        <div class="progress-container">
            <span class="progress-bar"></span>
        </div>
    </progress>
</div>


<!-- /post -->

<!-- The #contentFor helper here will send everything inside it up to the matching #block helper found in default.hbs -->


        <!-- Previous/next page links - displayed on every page -->
        

        <!-- The footer at the very bottom of the screen -->
        <footer class="site-footer outer">
            <div class="site-footer-content inner">
                <section class="copyright"><a href="/blog/">Fumitsuki's magic box</a> &copy; 2022</section>
                <section class="poweredby">Proudly published with <a href="https://jekyllrb.com/">Jekyll</a> &
                    <a href="https://pages.github.com/" target="_blank" rel="noopener">GitHub Pages</a> using
                    <a href="https://github.com/jekyllt/jasper2" target="_blank" rel="noopener">Jasper2</a></section>
                <nav class="site-footer-nav">
                    <a href="/blog/">Latest Posts</a>
                    
                    <a href="https://twitter.com/Fumitsuki0802" target="_blank" rel="noopener">Twitter</a>
                </nav>
            </div>
        </footer>

    </div>

    <!-- The big email subscribe modal content -->
    

    <!-- highlight.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.10.0/components/prism-abap.min.js"></script>
    <script>$(document).ready(function() {
      $('pre code').each(function(i, block) {
        hljs.highlightBlock(block);
      });
    });</script>

    <!-- jQuery + Fitvids, which makes all video embeds responsive -->
    <script
        src="https://code.jquery.com/jquery-3.2.1.min.js"
        integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
        crossorigin="anonymous">
    </script>
    <script type="text/javascript" src="/blog/assets/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="https://demo.ghost.io/assets/js/jquery.fitvids.js?v=724281a32e"></script>


    <!-- Paginator increased to "infinit" in _config.yml -->
    <!-- if paginator.posts  -->
    <!-- <script>
        var maxPages = parseInt('');
    </script>
    <script src="/blog/assets/js/infinitescroll.js"></script> -->
    <!-- /endif -->

    


    <!-- Add Google Analytics  -->
    <!-- Google Analytics Tracking code -->
 <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-69281367-1', 'auto');
  ga('send', 'pageview');

 </script>


    <!-- The #block helper will pull in data from the #contentFor other template files. In this case, there's some JavaScript which we only want to use in post.hbs, but it needs to be included down here, after jQuery has already loaded. -->
    
        <script>

// NOTE: Scroll performance is poor in Safari
// - this appears to be due to the events firing much more slowly in Safari.
//   Dropping the scroll event and using only a raf loop results in smoother
//   scrolling but continuous processing even when not scrolling
$(document).ready(function () {
    // Start fitVids
    var $postContent = $(".post-full-content");
    $postContent.fitVids();
    // End fitVids

    var progressBar = document.querySelector('progress');
    var header = document.querySelector('.floating-header');
    var title = document.querySelector('.post-full-title');

    var lastScrollY = window.scrollY;
    var lastWindowHeight = window.innerHeight;
    var lastDocumentHeight = $(document).height();
    var ticking = false;

    function onScroll() {
        lastScrollY = window.scrollY;
        requestTick();
    }

    function onResize() {
        lastWindowHeight = window.innerHeight;
        lastDocumentHeight = $(document).height();
        requestTick();
    }

    function requestTick() {
        if (!ticking) {
            requestAnimationFrame(update);
        }
        ticking = true;
    }

    function update() {
        var trigger = title.getBoundingClientRect().top + window.scrollY;
        var triggerOffset = title.offsetHeight + 35;
        var progressMax = lastDocumentHeight - lastWindowHeight;

        // show/hide floating header
        if (lastScrollY >= trigger + triggerOffset) {
            header.classList.add('floating-active');
        } else {
            header.classList.remove('floating-active');
        }

        progressBar.setAttribute('max', progressMax);
        progressBar.setAttribute('value', lastScrollY);

        ticking = false;
    }

    window.addEventListener('scroll', onScroll, {passive: true});
    window.addEventListener('resize', onResize, false);

    update();
});
</script>

    

    <!-- Ghost outputs important scripts and data with this tag - it should always be the very last thing before the closing body tag -->
    <!-- ghost_foot -->

</body>
</html>
